<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% load static %}
    <title>Class: {{this_class.subject}}</title>
</head>
<body>
    <div class="img"> 
        <img src="{% static 'img/basic_img.jpg' %}" alt="img">
    </div>
    <p><a href="/user_info">{{user.first_name}}</a> | <a href="/logout">Logout</a></p>
    <div id="navigation">
        <a href="/user_homepage">Home</a>
        <a href="/about_us">About Us</a>
        <a href="/image/all">Project Showcase</a>
        <a href="/class_info">Class Info</a>
        <a href="/request_appointment">Request Appointment</a>
        <a href="#">Helpful Links</a>
    </div>
    <div id="content">
        <h1>{{this_class.subject}}</h1>
        <p>Class Description: {{this_class.desc}}</p>
        <p>Class time: {{this_class.schedule_day}} at {{this_class.schedule_time}}</p>
        <p>Start Date: {{this_class.start_date|date}}</p>
        <p>End Date: {{this_class.end_date|date}}</p>
        {% if user.access_level == 'teacher' %}
        <form action="/class/{{this_class.id}}/edit" method="post">
            {% csrf_token %}
            <input type="submit" value="Edit Class Information">
        </form>
        {% endif %}
    </div>
    <div id="projects">
        <h3>Assigned Projects:</h3>
        <ul>
            {% for project in this_class.project_classes.all %}
                <li><a href="/project_detail/{{project.id}}">{{project.title}}</a></li>
            {% endfor %}

        </ul>

        {% if user.access_level == 'teacher' %}
            <p>Create New Project for Class:</p>
            <form action="/add_project/{{this_class.id}}" method="post">
                {% csrf_token %}
                <label for="title">Project Name: </label>
                <input type="text" name="title" id="title"><br>
                <label for="due_date">Project Due Date: </label>
                <input type="date" name="due_date" id="due_date"><br>
                <label for="desc">Description: </label>
                <textarea name="desc" id="desc" cols="30" rows="10"></textarea>
                <input type="submit" value="Create Project">
            </form>
        {% endif %}
        
        {% if messages %}
            <ul class="messages">    
            {% for message in messages %}    
                <li {% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>    
            {% endfor %}
            </ul>
        {% endif %}
    </div>
    <div id="students">
        <h3>Students: </h3>
        <ul>
        {% for student in this_class.user.all %}
                <li><a href="#">{{student.first_name}} {{student.last_name}}</a></li>
        {% endfor %}
        </ul>
        {% if user.access_level == 'teacher' %}
            <p>Add Student to class</p>
            
            <form action="/add_student/{{this_class.id}}" method="post">
                {% csrf_token %}
                <select name="list_of_students" id="list_of_students">
                    {% for user in all_user %}
                    {% if user.access_level == 'student' and not user in this_class.user.all %}
                        <option value="{{user.id}}">{{user.first_name}} {{user.last_name}}</option>
                    {% endif %}
                    {% endfor %}
                </select>
                <input type="submit" value="Add Student">
            </form>
        {% endif %}

        
    </div>
    
</body>
</html>